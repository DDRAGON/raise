function sendPassword(){password=$("#inputPasswordArea").val(),$("#debugWindow").html(password),socket.emit("changePassword",password),$("#passwordArea").remove(),$("#canvas_pane").show(),$("#controlButton").show(),$("#showOptionButton").show()}function drawTableInfo(e){var a=e.players,o=e.board;displayInit(),displayDealerButton(e.button),displayBoard(o);for(var t in a){var i=a[t];i&&(isActive(i)&&resetPlayerBox(i.seatId),displayName(i.seatId,i.name),displayHand(i.seatId,i.hand,i.isActive),lastTableInfo.players&&lastTableInfo.players[t]&&isActive(lastTableInfo.players[t])&&!isActive(i)&&displayFold(i.seatId))}lastTableInfo=e}function displayInit(){$(".playerBox").hide(),$("#board").hide()}function resetPlayerBox(e){$("#player"+e+"Folded").hide(),$("#player"+e+"Box").css({opacity:"1.0"})}function isActive(e){return 1==e.isActive}function displayDealerButton(e){$(".dealer").removeClass("on"),$("#player"+e+"Dealer").addClass("on")}function displayBoard(e){if(!e||0>=e.length)return $(".board").fadeOut(200,function(){$(".board.card").removeClass("color_s color_h color_d color_c mark_s mark_h mark_d mark_c").text("")}),void 0;$("#board").show();for(var a=0;5>a;a++)e[a]?(e[a],$selector=$("#board"+a),$selector.fadeIn()):$("#board"+a).hide()}function displayHand(e,a,o){return $leftCard=$("#player"+e+"HandLeft"),$rightCard=$("#player"+e+"HandRight"),o?(a&&a[0]?displayCard($leftCard,"0s"):hideCard($leftCard),a&&a[1]?displayCard($rightCard,"1h"):hideCard($rightCard),void 0):(hideCard($leftCard),hideCard($rightCard),void 0)}function hideCard(e){e.hide(),e.removeClass("color_s color_h color_d color_c mark_s mark_h mark_d mark_c").text("")}function displayCard(e){e.text("O"),e.fadeIn()}function displayName(e,a){a&&($("#player"+e+"Box").show(),$("#player"+e+"Name").text(a))}function displayFold(e){$("#player"+e+"Folded").show()}function setLayoutRound(){var e=$(window).width(),a=$(window).height(),o=parseInt(e/5),t=parseInt(DEFAULT_BUTTON_HEIGHT*a/DEFAULT_CANVAS_HEIGHT),i=e,s=a-t,n=parseInt(10*i/DEFAULT_CANVAS_WIDTH),d=parseInt(16*i/DEFAULT_CANVAS_WIDTH),r=parseInt(67*i/DEFAULT_CANVAS_WIDTH),c=parseInt(18*i/DEFAULT_CANVAS_WIDTH),l=parseInt(5*s/DEFAULT_CANVAS_HEIGHT),p=parseInt(30*s/DEFAULT_CANVAS_HEIGHT),h=c+r+10,g=parseInt(66*s/DEFAULT_CANVAS_HEIGHT);$("#canvas_pane").css({width:i+"px",height:s+"px"});var f=parseInt(210*s/DEFAULT_CANVAS_HEIGHT),v=parseInt(203*i/DEFAULT_CANVAS_WIDTH);$("#board").css({top:f+"px",left:v+"px"}),$("#player0Box").css({left:"0px",top:s/2-g/2+"px",width:h+"px",height:g+"px"}),$("#player1Box").css({left:"0px",top:"0px",width:h+"px",height:g+"px"}),$("#player2Box").css({left:1*(i/3)-h/2+"px",top:"0px",width:h+"px",height:g+"px"}),$("#player3Box").css({left:2*(i/3)-h/2+"px",top:"0px",width:h+"px",height:g+"px"}),$("#player4Box").css({left:i-h+"px",top:"0px",width:h+"px",height:g+"px"}),$("#player5Box").css({left:i-h+"px",top:s/2-g/2+"px",width:h+"px",height:g+"px"}),$("#player6Box").css({left:i-h+"px",top:s-g+"px",width:h+"px",height:g+"px"}),$("#player7Box").css({left:2*(i/3)-h/2+"px",top:s-g+"px",width:h+"px",height:g+"px"}),$("#player8Box").css({left:1*(i/3)-h/2+"px",top:s-g+"px",width:h+"px",height:g+"px"}),$("#player9Box").css({left:"0px",top:s-g+"px",width:h+"px",height:g+"px"});for(var u=0;10>u;u++)$("#player"+u+"Hand").css({height:p+"px"}),$("#player"+u+"HandLeft").css({"padding-top":l+"px",font:d+"pt Arial, sans-serif"}),$("#player"+u+"HandRight").css({"padding-top":l+"px",font:d+"pt Arial, sans-serif"}),$("#player"+u+"Name").css({width:r+"px"}),$("#player"+u+"Dealer").css({width:c+"px","font-size":n+"pt"}),$("#player"+u+"Box").css({"font-size":n+"pt"}),$("#player"+u+"Odds").css({"font-size":n+"pt"}),$("#player"+u+"Folded").css({"font-size":d+"pt"});var x=parseInt(t/3);$("#nextButton").css({width:o+"px",height:t+"px",font:x+"px Arial, sans-serif"}),$("#showOptionButton").css({width:o+"px",height:t+"px",font:x+"px Arial, sans-serif"}),$("#resetButton").css({width:o+"px",height:t+"px",font:x+"px Arial, sans-serif"}),$("#undoButton").css({width:o+"px",height:t+"px",font:x+"px Arial, sans-serif"})}function bindTapAndTapHold(){for(var e=0;10>e;e++)$("#player"+e+"Box").bind("taphold",tapHoldHandler),$("#player"+e+"Box").bind("tap",tapHandler)}function tapHoldHandler(e){var a=e.target.id,o=a.substring(6,7);socket.emit("deletePlayerWithPassword",{password:password,seatId:o})}function tapHandler(e){if(1!=tapEventIgnore){tapEventIgnore=!0;var a=e.target.id,o=a.substring(6,7);socket.emit("foldPlayerWithPassword",{password:password,seatId:o}),setTimeout("resetTapEventIgnore()",100)}}function resetTapEventIgnore(){tapEventIgnore=!1}function showOption(){toggleButtons()}function sendNextGame(){socket.emit("imageSendWithPassWord",{password:password,image:"nextGame"}),toggleButtons()}function sendResetGame(){socket.emit("imageSendWithPassWord",{password:password,image:"resetGame"}),toggleButtons()}function sendUndo(){socket.emit("undoWithPassword",password),toggleButtons()}function toggleButtons(){$("#nextButton").toggle(),$("#resetButton").toggle(),$("#undoButton").toggle()}function disConnected(){alert("接続が切れました！\nディーラーページをリロードし再度設定してください。")}var socket=io.connect("http://"+hostAddress+"/forDealer");socket.on("tableInfo",function(e){drawTableInfo(e)}),socket.on("disconnect",function(){disConnected()});var password,lastTableInfo={},oddsList=[],DEFAULT_CANVAS_WIDTH=640,DEFAULT_CANVAS_HEIGHT=360,DEFAULT_BUTTON_WIDTH=120,DEFAULT_BUTTON_HEIGHT=36;$(window).on("orientationchange",function(){setLayoutRound(),drawTableInfo(lastTableInfo)});var tapEventIgnore=!1;$(function(){$("#canvas_pane").hide(),$(".ui-loader").remove(),setLayoutRound(),bindTapAndTapHold()});