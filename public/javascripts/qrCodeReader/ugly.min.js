function sendImage(e){"ng"!=e&&"j1"!=e||(e="nextGame"),"rg"!=e&&"j2"!=e||(e="resetGame"),socket.emit("imageSendWithPassWord",{image:e,passWord:$("#inputArea").val()})}function sound(){var e=$("[name=musicFileName] option:selected").text();"アニキランダム"==e&&(e=anikiMusicFileName[Math.floor(Math.random()*anikiMusicFileName.length)]);var e=e.replace(".","\\.");$("#"+e).get(0).play()}function RewriteAndRead(){config.ctxForVideo.drawImage(video,0,0,config.canvasWidth,config.canvasHeight);var e=config.ctxForVideo.getImageData(0,0,config.canvasWidth,config.canvasHeight);lastCardPassedTimeSec+=.001*readQRCodeIntervalTimeMSec,lastCardPassedTimeSec>=1&&(lastCardPassedTimeSec=0,setLastCard(""),lastCard="");try{var a=new com.google.zxing.qrcode.QRCodeReader,i=new RGBLuminanceSource(e.data,e.width,e.height),t=new com.google.zxing.BinaryBitmap(new com.google.zxing.common.HybridBinarizer(i)),n=a.decode1(t),o=n.get_text();""===lastCard||lastCard!==o?(setLastCard(o),lastCardPassedTimeSec=0,sound(),sendImage(o)):lastCard===o&&(lastCardPassedTimeSec=0)}catch(e){}setTimeout("RewriteAndRead()",readQRCodeIntervalTimeMSec)}function setLastCard(e){lastCard=e,$("#result").html(e)}function setColorAndFont(e,a){config.ctx.fillStyle=e,config.ctx.font="bold "+a+"px 'ITC HIGHLANDER'"}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia;var video=document.getElementById("myVideo"),localStream=null;navigator.getUserMedia({video:!0,audio:!1},function(e){video.srcObject=e},function(e){console.log(e)});var socket=io.connect("https://"+hostAddress+"/qrCodeReader"),config={canvasWidth:400,canvasHeight:300},lastCard="",lastCardPassedTimeSec=0,readQRCodeIntervalTimeMSec=50,anikiMusicFileName=["aniki1.wav","aniki2.mp3","aniki3.wav","aniki4.wav","aniki5.wav"];$(function(){var e=$("#canvasForVideo").get(0);config.ctxForVideo=e.getContext("2d"),RewriteAndRead()}),$("#changeReadQRCodeIntervalTimeMSec").change(function(){switch($(this).val()){case"標準":return void(readQRCodeIntervalTimeMSec=100);case"高速":return void(readQRCodeIntervalTimeMSec=50)}});
//# sourceMappingURL=public/javascripts/qrCodeReader/ugly.min.js